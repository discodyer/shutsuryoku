# 无人机

## 问答

1. 无人机（前身穿越机）的硬件配置，例如开发板，自己加装了什么硬件
机架：SpeedyBee Bee35 3.5寸机架
飞控：微空MicoAir405飞控（刷入Ardupilot固件）
电池：大黄狗电池6S 1380mah 150C
螺旋桨：GEMFAN乾丰D90S-3螺旋桨3.5寸三叶涵道
无刷电机：酷飞axisflying C206电机 1960kv
遥控器：JumperT20遥控器 内置 915Mhz ELRS高频头
接收机：贝壳ELRS接收机 915Mhz
电调：JHEMCU津航55A四合一电调
机载电脑：Milk-V meles 8G
降压模块：自制TPS56637 5V 6A降压模块（给开发板供电）
光流传感器MTF-02 2.5米测距光流一体模块（用于室内粗略定位）
一些固定用的3D打印件

2. 简单的自我介绍（50字左右），以及写写为什么要想做这个RISC-V开发板在无人机上应用的项目，爱好 or anything else（不超过80字）
我是一名电子发烧友，喜欢折腾各种东西，经常会有一些有趣的想法并且尝试去实现它，在探索中学习新技能

我在大学里组建过一个无人机基地，主要驱动力是打比赛，当然也有热爱在里面。我觉得无人机只是作为一个载体，证明RISC-V在无人机领域的可能性。

3. 目前的进展如何，是否可以飞起来、有哪些功能，ROS能直接跑吗
无人机本身能起飞并用遥控器操作，以前编写的ROS代码是基于ROS1的，需要修改一些东西才能兼容ROS2。之前的代码是基于mid360这一款三维激光雷达室内定位和建图的，所以需要删除一些功能。目前初步打算实现OpenCV识别地面目标点并使用视觉PID控制无人机定点飞行，可能是投掷一个东西或者精准降落。

4. 之后计划添加哪些功能
后期可以研究一下在th1520上运行yolo等模型，加入一些别的识别功能。当然激光雷达应该也能上，但是穿越机可能飞不动，需要更大的无人机

5. 基于riscv板子，不用改ROS能直接飞起来么
可以的，我另外有一套基于Python的简单代码库，不依赖ROS可以直接控制无人机

## 系统框架

无人机使用Ardupilot开源固件，我用的这个飞控需要自行编译，配置文件链接：

无人机和meles开发板使用串口通信，通信协议是Mavlink V2

在ros上有mavros这个包，提供了和无人机通信的接口

无人机室内定位使用光流传感器和激光传感器，定位精度不高

使用OpenCV识别目标图像，计算出偏移量，再通过上位机的PID控制器输出速度控制指令传给飞控，飞机做出响应，使无人机悬停到目标物体正上方

需要调整视觉PID的参数，不同的高度和无人机需要相应调整

### 固件编译教程

### 无人机调参

参阅官方文档

### 飞行测试
